<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="ü™Ñ AI Dream Interpreter - ‡∏ñ‡∏≠‡∏î‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô ‡πÅ‡∏õ‡∏•‡∏à‡∏¥‡∏ï‡πÉ‡∏ï‡πâ‡∏™‡∏≥‡∏ô‡∏∂‡∏Å ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ö‡πâ‡∏´‡∏ß‡∏¢‡∏ô‡∏≥‡πÇ‡∏ä‡∏Ñ">
    <meta name="description" content="‡πÉ‡∏ä‡πâ AI ‡∏ñ‡∏≠‡∏î‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÅ‡∏õ‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏à‡∏¥‡∏ï‡πÉ‡∏ï‡πâ‡∏™‡∏≥‡∏ô‡∏∂‡∏Å ‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏Ç‡∏´‡∏ß‡∏¢‡∏ô‡∏≥‡πÇ‡∏ä‡∏Ñ">
    <meta name="keywords" content="‡∏ñ‡∏≠‡∏î‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô, ‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô, ‡∏´‡∏ß‡∏¢‡πÑ‡∏ó‡∏¢, AI, ‡∏à‡∏¥‡∏ï‡πÉ‡∏ï‡πâ‡∏™‡∏≥‡∏ô‡∏∂‡∏Å, ‡πÄ‡∏•‡∏Ç‡πÄ‡∏î‡πà‡∏ô">
    <title>AI Dream Interpreter - ‡∏ñ‡∏≠‡∏î‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon.svg">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon.svg">
    <link rel="apple-touch-icon" href="/favicon.svg">
    
    <style>
        /* ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÑ‡∏ó‡∏¢‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° */
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Sarabun', sans-serif;
            background: linear-gradient(135deg, #0c0c2e 0%, #1a1a3e 25%, #2d1b69 50%, #4a148c 75%, #6a1b9a 100%);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            opacity: 0;
            animation: dreamEntry 4s ease-out forwards;
        }

        /* Dream Entry Animation - ‡∏•‡πà‡∏≠‡∏á‡∏•‡∏≠‡∏¢‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡∏ù‡∏±‡∏ô */
        @keyframes dreamEntry {
            0% {
                opacity: 0;
                transform: scale(1.5) translateY(100px);
                filter: blur(20px);
            }
            25% {
                opacity: 0.3;
                transform: scale(1.2) translateY(50px);
                filter: blur(10px);
            }
            50% {
                opacity: 0.6;
                transform: scale(1.1) translateY(20px);
                filter: blur(5px);
            }
            75% {
                opacity: 0.8;
                transform: scale(1.05) translateY(10px);
                filter: blur(2px);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
                filter: blur(0);
            }
        }

        /* Dream Overlay - ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏´‡∏°‡∏≠‡∏Å‡∏ù‡∏±‡∏ô */
        .dream-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent 0%, rgba(76, 175, 80, 0.1) 50%, rgba(156, 39, 176, 0.2) 100%);
            pointer-events: none;
            z-index: 0;
            animation: dreamMist 8s ease-in-out infinite;
        }

        @keyframes dreamMist {
            0%, 100% {
                opacity: 0.3;
                transform: scale(1);
            }
            50% {
                opacity: 0.6;
                transform: scale(1.1);
            }
        }

        /* Floating Clouds - ‡πÄ‡∏°‡∏Ü‡∏•‡∏≠‡∏¢‡∏ï‡∏±‡∏ß */
        .floating-clouds {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .cloud {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            opacity: 0.4;
            animation: floatCloud 20s infinite linear;
        }

        .cloud:before, .cloud:after {
            content: '';
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50px;
        }

        .cloud-1 {
            width: 100px;
            height: 40px;
            top: 20%;
            left: -150px;
            animation-duration: 25s;
        }

        .cloud-1:before {
            width: 50px;
            height: 50px;
            top: -25px;
            left: 10px;
        }

        .cloud-1:after {
            width: 60px;
            height: 40px;
            top: -15px;
            right: 10px;
        }

        .cloud-2 {
            width: 80px;
            height: 30px;
            top: 60%;
            left: -120px;
            animation-duration: 30s;
            animation-delay: -10s;
        }

        .cloud-2:before {
            width: 40px;
            height: 40px;
            top: -20px;
            left: 15px;
        }

        .cloud-2:after {
            width: 50px;
            height: 30px;
            top: -10px;
            right: 15px;
        }

        @keyframes floatCloud {
            0% {
                transform: translateX(-150px);
            }
            100% {
                transform: translateX(calc(100vw + 150px));
            }
        }
        
        /* ‡∏î‡∏≤‡∏ß‡∏£‡∏∞‡∏¢‡∏¥‡∏ö‡∏£‡∏∞‡∏¢‡∏±‡∏ö */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite alternate;
        }

        /* Shooting Stars - ‡∏î‡∏≤‡∏ß‡∏ï‡∏Å */
        .shooting-star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: linear-gradient(45deg, #fff, #4fc3f7);
            border-radius: 50%;
            animation: shootingStar 3s linear infinite;
        }

        @keyframes shootingStar {
            0% {
                transform: translate(-100px, -100px);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translate(100vw, 100vh);
                opacity: 0;
            }
        }

        /* Constellation Effect - ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏î‡∏≤‡∏ß */
        .constellation {
            position: absolute;
            opacity: 0.7;
            animation: constellationGlow 4s ease-in-out infinite;
        }

        @keyframes constellationGlow {
            0%, 100% {
                opacity: 0.4;
                transform: scale(1);
            }
            50% {
                opacity: 0.8;
                transform: scale(1.1);
            }
        }
        
        @keyframes twinkle {
            0% { opacity: 0.3; transform: scale(1); }
            100% { opacity: 1; transform: scale(1.2); }
        }

        /* Floating Dream Elements - ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ */
        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .dream-element {
            position: absolute;
            font-size: 2rem;
            opacity: 0.3; /* ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô */
            animation: floatDream 25s infinite linear; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡πâ‡∏≤‡∏•‡∏á */
        }

        @keyframes floatDream {
            0% {
                transform: translateY(100vh) translateX(-50px) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.3;
            }
            90% {
                opacity: 0.3;
            }
            100% {
                transform: translateY(-100px) translateX(50px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Particle Effects */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 3px; /* ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏≠‡∏ô‡∏∏‡∏†‡∏≤‡∏Ñ */
            height: 3px;
            background: radial-gradient(circle, #fff, transparent);
            border-radius: 50%;
            animation: particleFloat 10s infinite linear; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ */
        }

        @keyframes particleFloat {
            0% {
                transform: translateY(100vh) translateX(0) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 0.7;
                transform: scale(1);
            }
            90% {
                opacity: 0.7;
            }
            100% {
                transform: translateY(-50px) translateX(100px) scale(0);
                opacity: 0;
            }
        }

        /* Morphing Text Animation */
        .morphing-text {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: morphText 8s ease-in-out infinite; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ */
        }

        @keyframes morphText {
            0%, 100% {
                background-position: 0% 50%;
                transform: scale(1);
            }
            25% {
                background-position: 100% 50%;
                transform: scale(1.05);
            }
            50% {
                background-position: 50% 100%;
                transform: scale(1.1);
            }
            75% {
                background-position: 100% 0%;
                transform: scale(1.05);
            }
        }

        /* Loading Screen - ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, #0c0c2e 0%, #1a1a3e 30%, #2d1b69 60%, #4a148c 80%, #000 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: dreamPortalExit 3s ease-in-out 4s forwards;
            overflow: hidden;
        }

        .loading-screen.hidden {
            display: none;
        }

        /* Dream Portal Exit Animation */
        @keyframes dreamPortalExit {
            0% { 
                opacity: 1; 
                transform: scale(1);
                filter: blur(0px);
            }
            30% {
                transform: scale(1.1);
                filter: blur(2px);
            }
            70% {
                opacity: 0.7;
                transform: scale(0.8);
                filter: blur(5px);
            }
            100% { 
                opacity: 0; 
                visibility: hidden;
                transform: scale(0.3);
                filter: blur(20px);
            }
        }

        /* Dream Portal Background */
        .dream-portal {
            position: absolute;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle, transparent 30%, rgba(156, 39, 176, 0.3) 50%, rgba(76, 175, 80, 0.2) 70%, transparent 100%);
            animation: portalSpin 12s linear infinite, portalPulse 4s ease-in-out infinite; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏•‡∏≤ */
        }

        @keyframes portalSpin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes portalPulse {
            0%, 100% { 
                transform: scale(1);
                opacity: 0.6;
            }
            50% { 
                transform: scale(1.2);
                opacity: 0.9;
            }
        }

        .dream-logo {
            font-size: 4rem;
            margin-bottom: 2rem;
            animation: dreamFloat 5s ease-in-out infinite; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏•‡∏≤ */
            z-index: 10;
            position: relative;
        }

        @keyframes dreamFloat {
            0%, 100% {
                transform: translateY(0px) scale(1);
                filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.5));
            }
            33% {
                transform: translateY(-10px) scale(1.05);
                filter: drop-shadow(0 0 30px rgba(156, 39, 176, 0.7));
            }
            66% {
                transform: translateY(5px) scale(0.98);
                filter: drop-shadow(0 0 25px rgba(76, 175, 80, 0.6));
            }
        }

        .loading-text {
            font-size: 1.5rem;
            color: #e1bee7;
            margin-bottom: 2rem;
            animation: dreamMessage 6s ease-in-out infinite; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏•‡∏≤ */
            z-index: 10;
            position: relative;
            text-align: center;
            text-shadow: 0 0 10px rgba(225, 190, 231, 0.5);
        }

        @keyframes dreamMessage {
            0%, 100% { 
                opacity: 0.7;
                transform: translateY(0px);
            }
            50% { 
                opacity: 1;
                transform: translateY(-5px);
            }
        }

        .dream-orb {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8), rgba(138, 43, 226, 0.6), rgba(75, 0, 130, 0.8));
            animation: orbFloat 5s ease-in-out infinite; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏•‡∏≤ */
            box-shadow: 0 0 50px rgba(138, 43, 226, 0.6);
        }

        @keyframes orbFloat {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-20px) rotate(180deg);
            }
        }
        
        /* ‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å */
        .container {
            position: relative;
            z-index: 2;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInDown 1s ease-out;
            position: relative;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .header-top .theme-selector {
            display: none; /* ‡∏ã‡πà‡∏≠‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Free user */
            gap: 8px;
        }

        .header-top .theme-selector.pro-active {
            display: flex; /* ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô Pro */
        }

        .header-top .theme-btn {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 2px solid transparent;
        }

        .header-top .theme-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .header-top .theme-btn.active {
            background: linear-gradient(45deg, #9c27b0, #673ab7);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.4);
        }

        .pro-status {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .status-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            animation: badgePulse 2s ease-in-out infinite;
        }

        .status-badge.free {
            background: linear-gradient(135deg, #666, #888);
            color: #fff;
            border: 2px solid #999;
        }

        .status-badge.pro {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #333;
            border: 2px solid #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        @keyframes badgePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .upgrade-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, #ff6b6b, #ffd93d);
            color: #fff;
            border: none;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
            animation: upgradeGlow 3s ease-in-out infinite;
        }

        .upgrade-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
        }

        .upgrade-btn.hidden {
            display: none;
        }

        @keyframes upgradeGlow {
            0%, 100% { 
                box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
            }
            50% { 
                box-shadow: 0 4px 25px rgba(255, 107, 107, 0.6);
            }
        }
        
        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            color: #fff;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            margin-bottom: 10px;
        }
        
        .header .tagline {
            font-size: 1.2rem;
            color: #e1bee7;
            font-weight: 400;
        }

        /* Interactive Button Effects */
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            font-family: 'Sarabun', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #9c27b0, #e91e63);
            color: white;
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.4);
        }

        .btn-primary:hover {
            background: linear-gradient(45deg, #ad42c4, #f06292);
            box-shadow: 0 6px 25px rgba(156, 39, 176, 0.6);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Pro Features Styles */
        .pro-features {
            margin-top: 20px;
        }

        .pro-card {
            border: 2px solid #ffd700;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 255, 255, 0.05));
            position: relative;
            overflow: hidden;
        }

        .pro-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.2), transparent);
            animation: proShine 3s infinite;
        }

        @keyframes proShine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .pro-badge {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #000;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: bold;
            margin-left: 10px;
            animation: badgePulse 2s infinite;
        }

        .btn-pro {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #000;
            border: none;
            font-weight: bold;
        }

        .btn-pro:hover {
            background: linear-gradient(45deg, #ffed4e, #ffd700);
            transform: translateY(-2px);
        }

        .theme-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .theme-btn {
            padding: 10px 15px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .theme-btn:hover {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.2);
            transform: translateY(-2px);
        }

        .theme-btn.active {
            border-color: #ffd700;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #000;
        }

        .history-list {
            margin-top: 15px;
            max-height: 200px;
            overflow-y: auto;
        }

        .history-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            margin: 5px 0;
            border-radius: 8px;
            border-left: 3px solid #ffd700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .history-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }

        .history-date {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 5px;
        }

        .history-dream {
            font-size: 0.9rem;
            color: #fff;
        }

        /* Tab Navigation Styles */
        .tab-navigation {
            display: flex;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 5px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .tab-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: transparent;
            color: rgba(255, 255, 255, 0.7);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .tab-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        .tab-btn.active {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #000;
            font-weight: 600;
        }

        /* Tab Content Styles */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .history-section {
            padding: 20px 0;
        }

        .section-title {
            color: #ffd700;
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
        }

        /* Theme Variations */
        body.golden-theme {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d1810 50%, #1a1a1a 100%);
        }

        body.golden-theme .main-card {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 255, 255, 0.05));
            border: 2px solid rgba(255, 215, 0, 0.3);
        }

        body.mystic-theme {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0a1a 50%, #0a0a0a 100%);
        }

        body.mystic-theme .main-card {
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.1), rgba(75, 0, 130, 0.05));
            border: 2px solid rgba(138, 43, 226, 0.3);
        }

        /* Floating Icons */
        .floating-icon {
            position: absolute;
            font-size: 1.5rem;
            opacity: 0.7;
            animation: floatIcon 6s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes floatIcon {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            25% {
                transform: translateY(-10px) rotate(5deg);
            }
            50% {
                transform: translateY(-20px) rotate(0deg);
            }
            75% {
                transform: translateY(-10px) rotate(-5deg);
            }
        }

        /* Enhanced Input Effects */
        .dream-input {
            width: 100%;
            padding: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 1.1rem;
            font-family: 'Sarabun', sans-serif;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            resize: vertical;
            min-height: 120px;
            position: relative;
        }

        .dream-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .dream-input:focus {
            outline: none;
            border-color: #e1bee7;
            box-shadow: 0 0 20px rgba(225, 190, 231, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }

        .input-section::before {
            content: '‚ú®';
            position: absolute;
            top: -10px;
            right: 20px;
            font-size: 1.5rem;
            animation: sparkle 2s ease-in-out infinite;
        }

        @keyframes sparkle {
            0%, 100% {
                opacity: 0.5;
                transform: scale(1);
            }
            50% {
                opacity: 1;
                transform: scale(1.2);
            }
        }
        
        /* ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏´‡∏•‡∏±‡∏Å - Glassmorphism */
        .main-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            animation: fadeInUp 1s ease-out 0.3s both;
        }
        
        .input-section {
            margin-bottom: 30px;
            position: relative;
        }
        
        .input-label {
            display: block;
            color: #fff;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• - Enhanced Animations */
        .result-section {
            display: none;
        }

        .result-section.show {
            display: block;
            animation: resultReveal 1s ease-out;
        }

        @keyframes resultReveal {
            0% {
                opacity: 0;
                transform: translateY(50px) scale(0.9);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .result-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            opacity: 0;
            transform: translateX(-50px);
            animation: cardSlideIn 0.8s ease-out forwards;
        }

        .result-card:nth-child(1) { animation-delay: 0.2s; }
        .result-card:nth-child(2) { animation-delay: 0.4s; }
        .result-card:nth-child(3) { animation-delay: 0.6s; }
        .result-card:nth-child(4) { animation-delay: 0.8s; }

        @keyframes cardSlideIn {
            0% {
                opacity: 0;
                transform: translateX(-50px);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .result-title {
            color: #e1bee7;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .result-content {
            color: #fff;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        /* Typewriter Effect */
        .typewriter {
            overflow: hidden;
            white-space: nowrap;
            animation: typeText 2s steps(40) forwards;
        }

        @keyframes typeText {
            0% { width: 0; }
            100% { width: 100%; }
        }

        .typewriter-content {
            white-space: normal;
            animation: fadeInText 0.5s ease-in 2s forwards;
            opacity: 0;
        }

        @keyframes fadeInText {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }
        
        /* Progress Bar ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏ä‡∏Ñ */
        .luck-score {
            margin-top: 15px;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff5722, #ff9800, #4caf50);
            border-radius: 10px;
            transition: width 1s ease-out;
            position: relative;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        /* ‡πÄ‡∏•‡∏Ç‡∏´‡∏ß‡∏¢ - Enhanced Animation */
        .lucky-numbers {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .number-badge {
            background: linear-gradient(45deg, #ffd700, #ffb300);
            color: #333;
            padding: 10px 15px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 1.2rem;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            animation: glow 2s infinite alternate;
            opacity: 0;
            transform: scale(0);
            animation: numberReveal 0.8s ease-out forwards, glow 2s infinite alternate 0.8s;
        }

        /* ... (animation-delay ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö .number-badge:nth-child(n) ‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ô JS ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô) ... */

        @keyframes numberReveal {
            0% {
                opacity: 0;
                transform: scale(0) rotate(180deg);
            }
            50% {
                transform: scale(1.2) rotate(0deg);
            }
            100% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
        }
        
        @keyframes glow {
            0% { box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3); }
            100% { box-shadow: 0 4px 25px rgba(255, 215, 0, 0.6); }
        }

        /* Number Counter Animation */
        .counter {
            display: inline-block;
        }

        .luck-score-number {
            font-weight: 700;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        
        /* Loading Animation */
        .loading {
            text-align: center;
            color: #e1bee7;
            font-size: 1.2rem;
            padding: 40px;
        }
        
        .loading-spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(225, 190, 231, 0.3);
            border-top: 4px solid #e1bee7;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï */
        .update-time {
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
            margin-top: 20px;
        }
        
        /* Animations */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* ======== PERFORMANCE OPTIMIZATION FOR MOBILE/LOW POWER ======== */
        
        /* 1. Respect Reduced Motion Setting */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
            
            /* ‡∏õ‡∏¥‡∏î Element ‡∏ó‡∏µ‡πà‡∏Å‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏™‡∏π‡∏á */
            .dream-overlay,
            .floating-clouds,
            .stars,
            .floating-elements,
            .particles,
            .dream-portal {
                display: none !important;
            }
            
            /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ Main Card ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ */
            .main-card {
                animation: none !important;
                opacity: 1 !important;
            }
        }

        /* 2. Optimization for Mobile (<= 768px) */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .header .tagline {
                font-size: 1rem;
            }
            
            .main-card {
                padding: 25px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .lucky-numbers {
                justify-content: center;
            }

            /* Tweak Layer Animations */
            .dream-overlay {
                animation-duration: 12s;
                opacity: 0.2;
            }
            
            .cloud {
                animation-duration: 35s;
                opacity: 0.2;
            }
            
            .star {
                animation-duration: 4s;
            }
            
            .dream-element {
                animation-duration: 25s;
                opacity: 0.3;
            }
            
            .particle {
                animation-duration: 12s;
                opacity: 0.3;
            }
            
            .dream-portal {
                animation-duration: 10s;
            }
            
            .dream-logo {
                animation-duration: 5s;
            }
        }
        
        /* 3. Severe Optimization for Small/Older Mobile Devices (<= 480px) */
        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .main-card {
                padding: 20px;
            }
            
            .dream-input {
                padding: 15px;
                font-size: 1rem;
            }

            /* ‡∏õ‡∏¥‡∏î Layer Animations ‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î */
            .dream-overlay {
                animation: none;
                opacity: 0.1;
            }
            
            .floating-clouds {
                opacity: 0.1;
            }
            
            .cloud {
                animation-duration: 60s;
                opacity: 0.1;
            }
            
            .stars {
                opacity: 0.3;
            }
            
            .star {
                animation-duration: 6s;
                opacity: 0.4;
            }
            
            .shooting-star {
                display: none; /* ‡∏ã‡πà‡∏≠‡∏ô‡∏î‡∏≤‡∏ß‡∏ï‡∏Å‡∏ö‡∏ô mobile */
            }
            
            .constellation {
                animation-duration: 8s;
                opacity: 0.3;
            }
            
            .dream-element {
                animation-duration: 40s;
                opacity: 0.2;
            }
            
            .particle {
                animation-duration: 20s;
                opacity: 0.2;
            }
            
            /* ‡∏•‡∏î Morphing Text Animation Speed */
            .morphing-text {
                animation-duration: 10s;
            }
            
            /* ‡∏•‡∏î Portal Animation Speed */
            .dream-portal {
                animation-duration: 15s;
            }
            
            .dream-logo {
                animation-duration: 8s;
            }
            
            .dream-orb {
                animation-duration: 8s;
            }
            
            /* ‡∏•‡∏ö icon ‡∏Å‡πà‡∏≠‡∏ô/‡∏´‡∏•‡∏±‡∏á input */
            .input-section::before {
                display: none;
            }
        }

        /* 4. Extreme Optimization for Low DPI Screens (Fallback) */
        @media (max-width: 480px) and (max-resolution: 150dpi) {
            .floating-clouds,
            .floating-elements,
            .particles {
                display: none !important;
            }
            
            .stars {
                opacity: 0.2;
            }
            
            .dream-overlay {
                background: linear-gradient(135deg, rgba(76, 175, 80, 0.05) 0%, rgba(156, 39, 176, 0.1) 100%);
                animation: none;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen - ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô -->
    <div class="loading-screen" id="loadingScreen">
        <div class="dream-portal"></div>
        <div class="dream-logo">üåô‚ú®</div>
        <div class="loading-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÇ‡∏•‡∏Å‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô...</div>
        <div class="dream-orb"></div>
    </div>

    <!-- Visual Layers (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ß‡∏≤‡∏á z-index ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°) -->
    <div class="dream-overlay"></div>
    
    <div class="floating-clouds">
        <div class="cloud cloud-1"></div>
        <div class="cloud cloud-2"></div>
    </div>
    
    <div class="particles" id="particles"></div>
    
    <div class="stars" id="stars"></div>
    
    <div class="floating-elements" id="floatingElements"></div>
    
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-top">
                <!-- ‡∏ò‡∏µ‡∏°‡∏û‡∏¥‡πÄ‡∏®‡∏© (‡∏¢‡πâ‡∏≤‡∏¢‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Pro) -->
                <div class="theme-selector" id="themeSelector">
                    <button class="theme-btn active" data-theme="default">üåô</button>
                    <button class="theme-btn" data-theme="golden">‚ú®</button>
                    <button class="theme-btn" data-theme="mystic">üîÆ</button>
                </div>
                
                <div class="pro-status" id="proStatus">
                    <span class="status-badge free" id="statusBadge">FREE</span>
                    <button class="upgrade-btn" id="upgradeBtn">‚≠ê ‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏õ‡πá‡∏ô Pro</button>
                </div>
            </div>
            <h1><span class="morphing-text">ü™Ñ AI Dream Interpreter</span></h1>
            <p class="tagline">‡∏ñ‡∏≠‡∏î‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô ‡πÅ‡∏õ‡∏•‡∏à‡∏¥‡∏ï‡πÉ‡∏ï‡πâ‡∏™‡∏≥‡∏ô‡∏∂‡∏Å ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ö‡πâ‡∏´‡∏ß‡∏¢‡∏ô‡∏≥‡πÇ‡∏ä‡∏Ñ</p>
        </header>
        
        <!-- ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏´‡∏•‡∏±‡∏Å -->
        <main class="main-card">
            <!-- Tab Navigation ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Pro -->
            <div class="tab-navigation" id="tabNavigation">
                <button class="tab-btn active" data-tab="interpret">üîÆ ‡∏ñ‡∏≠‡∏î‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô</button>
                <button class="tab-btn" data-tab="history">üìö ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô</button>
            </div>

            <!-- Tab Content: ‡∏ñ‡∏≠‡∏î‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô -->
            <div class="tab-content active" id="interpretTab">
                <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° -->
                <div class="input-section">
                    <label class="input-label" for="dreamInput">‡∏Ñ‡∏∏‡∏ì‡∏ù‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£?</label>
                    <textarea 
                        id="dreamInput" 
                        class="dream-input" 
                        placeholder="‡∏ù‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏£‡∏∑‡∏≠ ‡∏ù‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡πÑ‡∏•‡πà ‡∏ù‡∏±‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏à‡∏≠‡∏á‡∏π ‡∏ù‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏ö‡∏¥‡∏ô ‡∏ù‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏ï‡∏Å‡∏ô‡πâ‡∏≥..."
                        rows="4"
                    ></textarea>
                </div>
                
                <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ -->
                <div class="button-group">
                    <button id="interpretBtn" class="btn btn-primary">üîÆ ‡∏ñ‡∏≠‡∏î‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô</button>
                    <button id="randomBtn" class="btn btn-secondary">üé≤ ‡∏™‡∏∏‡πà‡∏°‡∏ù‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</button>
                    <button id="copyBtn" class="btn btn-secondary" style="display: none;">üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</button>
                </div>
                
                <!-- Loading -->
                <div id="loading" class="loading" style="display: none;">
                    <div class="loading-spinner"></div>
                    <p>üîÆ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì...</p>
                </div>
            </div>

            <!-- Tab Content: ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô -->
            <div class="tab-content" id="historyTab">
                <div class="history-section">
                    <h2 class="section-title">üìö ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
                    <div id="historyList" class="history-list"></div>
                </div>
            </div>
            
            <!-- ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• -->
            <div id="resultSection" class="result-section">
                <!-- ‡∏Ñ‡∏≥‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏° -->
                <div class="result-card">
                    <h3 class="result-title">‚ú® ‡∏Ñ‡∏≥‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô</h3>
                    <div id="interpretation" class="result-content"></div>
                </div>
                
                <!-- ‡∏à‡∏¥‡∏ï‡πÉ‡∏ï‡πâ‡∏™‡∏≥‡∏ô‡∏∂‡∏Å -->
                <div class="result-card">
                    <h3 class="result-title">üß† ‡πÅ‡∏õ‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏¥‡∏ï‡πÉ‡∏ï‡πâ‡∏™‡∏≥‡∏ô‡∏∂‡∏Å</h3>
                    <div id="subconscious" class="result-content"></div>
                </div>
                
                <!-- ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏ä‡∏Ñ -->
                <div class="result-card">
                    <h3 class="result-title">üçÄ ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ</h3>
                    <div id="luckScore" class="result-content"></div>
                    <div class="luck-score">
                        <div class="progress-bar">
                            <div id="progressFill" class="progress-fill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                
                <!-- ‡πÄ‡∏•‡∏Ç‡∏´‡∏ß‡∏¢ -->
                <div class="result-card">
                    <h3 class="result-title">üéØ ‡πÉ‡∏ö‡πâ‡∏´‡∏ß‡∏¢‡πÑ‡∏ó‡∏¢</h3>
                    <div class="result-content">‡πÄ‡∏•‡∏Ç‡πÄ‡∏î‡πà‡∏ô‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:</div>
                    <div id="luckyNumbers" class="lucky-numbers"></div>
                </div>

                <!-- Pro Features - ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Pro -->
                <div id="proFeatures" class="pro-features" style="display: none;">
                    <!-- ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏•‡∏∂‡∏Å -->
                    <div class="result-card pro-card">
                        <h3 class="result-title">üî¨ ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å <span class="pro-badge">PRO</span></h3>
                        <div id="deepAnalysis" class="result-content"></div>
                    </div>
                    
                    <!-- ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô -->
                    <div class="result-card pro-card">
                        <h3 class="result-title">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô <span class="pro-badge">PRO</span></h3>
                        <div id="dreamHistory">
                            <button id="saveBtn" class="btn btn-pro">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏ô‡∏µ‡πâ</button>
                            <p style="color: rgba(255,255,255,0.7); text-align: center; margin-top: 15px;">
                                üí° ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πá‡∏ö "‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô" ‡πÅ‡∏•‡πâ‡∏ß
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- ‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï -->
                <div id="updateTime" class="update-time"></div>
            </div>
        </main>
    </div>
    
    <script>
        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏ô‡∏∏‡∏†‡∏≤‡∏Ñ‡πÅ‡∏•‡∏∞‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏•‡∏≠‡∏¢
        function initializeFloatingElements() {
            const particleCount = window.innerWidth <= 480 ? 30 : 60;
            const elementCount = window.innerWidth <= 480 ? 3 : 8;
            
            const particlesContainer = document.getElementById('particles');
            const elementsContainer = document.getElementById('floatingElements');

            // 1. Particles
            for (let i = 0; i < particleCount; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                p.style.left = `${Math.random() * 100}%`;
                p.style.top = `${Math.random() * 100}%`;
                p.style.animationDelay = `${Math.random() * 10}s`;
                p.style.animationDuration = `${6 + Math.random() * 4}s`;
                particlesContainer.appendChild(p);
            }

            // 2. Dream Elements (Icons/Symbols)
            const symbols = ['üîÆ', 'üí´', 'üåü', 'üåô', 'üåÄ', 'üî±', 'üóùÔ∏è', 'üíé'];
            for (let i = 0; i < elementCount; i++) {
                const el = document.createElement('div');
                el.className = 'dream-element';
                el.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                el.style.left = `${Math.random() * 100}%`;
                el.style.top = `${Math.random() * 100}%`;
                el.style.fontSize = `${1.5 + Math.random() * 1}rem`;
                el.style.animationDelay = `${Math.random() * 25}s`;
                el.style.animationDuration = `${18 + Math.random() * 12}s`;
                elementsContainer.appendChild(el);
            }
        }
        
        // ‡∏£‡∏∞‡∏ö‡∏ö Pro Management (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°)
        class ProManager {
            // ... (‡πÇ‡∏Ñ‡πâ‡∏î ProManager ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) ...
            constructor() {
                this.isPro = this.checkProStatus();
                this.freeUsageCount = parseInt(localStorage.getItem('freeUsageCount') || '0');
                this.maxFreeUsage = 3;
            }

            checkProStatus() {
                const proKey = localStorage.getItem('proKey');
                const proExpiry = localStorage.getItem('proExpiry');
                
                if (proKey && proExpiry) {
                    const expiryDate = new Date(proExpiry);
                    if (new Date() < expiryDate) {
                        return true;
                    } else {
                        localStorage.removeItem('proKey');
                        localStorage.removeItem('proExpiry');
                    }
                }
                return false;
            }

            activatePro(key) {
                const validKeys = ['DREAM_PRO_2024', 'PREMIUM_DREAM_KEY', 'PRO_INTERPRETER_VIP'];

                if (validKeys.includes(key.toUpperCase())) {
                    const expiryDate = new Date();
                    expiryDate.setMonth(expiryDate.getMonth() + 1); 
                    
                    localStorage.setItem('proKey', key.toUpperCase());
                    localStorage.setItem('proExpiry', expiryDate.toISOString());
                    this.isPro = true;
                    this.updateProUI();
                    return true;
                }
                return false;
            }

            canUseService() {
                if (this.isPro) return true;
                return this.freeUsageCount < this.maxFreeUsage;
            }

            incrementUsage() {
                if (!this.isPro) {
                    this.freeUsageCount++;
                    localStorage.setItem('freeUsageCount', this.freeUsageCount.toString());
                }
            }

            getRemainingUsage() {
                if (this.isPro) return '‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î';
                return Math.max(0, this.maxFreeUsage - this.freeUsageCount);
            }

            updateProUI() {
                const statusBadge = document.getElementById('statusBadge');
                const upgradeBtn = document.getElementById('upgradeBtn');
                const proFeatures = document.getElementById('proFeatures');
                const themeSelector = document.getElementById('themeSelector');
                const tabNavigation = document.getElementById('tabNavigation');

                if (this.isPro) {
                    statusBadge.textContent = 'PRO';
                    statusBadge.className = 'status-badge pro';
                    upgradeBtn.classList.add('hidden');
                    if (proFeatures) proFeatures.style.display = 'block';
                    if (themeSelector) themeSelector.classList.add('pro-active');
                    if (tabNavigation) tabNavigation.style.display = 'flex';
                } else {
                    statusBadge.textContent = 'FREE';
                    statusBadge.className = 'status-badge free';
                    upgradeBtn.classList.remove('hidden');
                    if (proFeatures) proFeatures.style.display = 'none';
                    if (themeSelector) themeSelector.classList.remove('pro-active');
                    if (tabNavigation) tabNavigation.style.display = 'none';
                }
            }

            generateDeepAnalysis(dreamText, interpretation) {
                if (!this.isPro) return '';
                
                return `
                    <h4>üß¨ ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ä‡∏¥‡∏á‡∏à‡∏¥‡∏ï‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤</h4>
                    <p>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡∏à‡∏¥‡∏ï‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÉ‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏ñ‡∏π‡∏Å‡∏õ‡∏¥‡∏î‡∏ö‡∏±‡∏á</p>
                    
                    <h4>üîç ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà</h4>
                    <p>‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏•‡∏∂‡∏Å‡∏ã‡∏∂‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥</p>
                    
                    <h4>üí´ ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å</h4>
                    <p>‡∏Ñ‡∏ß‡∏£‡πÉ‡∏™‡πà‡πÉ‡∏à‡∏Å‡∏±‡∏ö‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏ó‡∏µ‡πà‡∏à‡∏¥‡∏ï‡πÉ‡∏ï‡πâ‡∏™‡∏≥‡∏ô‡∏∂‡∏Å‡∏™‡πà‡∏á‡∏°‡∏≤ ‡πÅ‡∏•‡∏∞‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</p>
                `;
            }

            saveDreamHistory(dreamText, interpretation) {
                if (!this.isPro) return;
                
                const history = JSON.parse(localStorage.getItem('dreamHistory') || '[]');
                const newEntry = {
                    id: Date.now(),
                    date: new Date().toLocaleDateString('th-TH'),
                    dream: dreamText.substring(0, 100) + (dreamText.length > 100 ? '...' : ''),
                    interpretation: interpretation.substring(0, 200) + (interpretation.length > 200 ? '...' : ''),
                    fullDream: dreamText,
                    fullInterpretation: interpretation
                };
                
                history.unshift(newEntry);
                if (history.length > 20) history.pop(); 
                
                localStorage.setItem('dreamHistory', JSON.stringify(history));
                this.displayDreamHistory();
            }

            displayDreamHistory() {
                if (!this.isPro) return;
                
                const historyLists = document.querySelectorAll('#historyList');
                const history = JSON.parse(localStorage.getItem('dreamHistory') || '[]');
                
                const historyHTML = history.length === 0 
                    ? '<p style="color: rgba(255,255,255,0.7); text-align: center;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô</p>'
                    : history.map(entry => `
                        <div class="history-item" onclick="proManager.loadHistoryItem(${entry.id})">
                            <div class="history-date">${entry.date}</div>
                            <div class="history-dream">${entry.dream}</div>
                        </div>
                    `).join('');
                
                historyLists.forEach(list => {
                    if (list) list.innerHTML = historyHTML;
                });
            }

            loadHistoryItem(id) {
                const history = JSON.parse(localStorage.getItem('dreamHistory') || '[]');
                const item = history.find(h => h.id === id);
                if (item) {
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    document.querySelector('[data-tab="interpret"]').classList.add('active');
                    document.getElementById('interpretTab').classList.add('active');
                    
                    document.getElementById('dreamInput').value = item.fullDream;
                    // ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏ó‡πá‡∏ö
                    setTimeout(() => {
                        document.getElementById('interpretation').innerHTML = item.fullInterpretation;
                        document.getElementById('resultSection').style.display = 'block';
                        document.getElementById('resultSection').scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'start' 
                        });
                    }, 100);
                }
            }

            initializeThemes() {
                const themeButtons = document.querySelectorAll('.header-top .theme-btn');
                const currentTheme = localStorage.getItem('selectedTheme') || 'default';
                
                this.applyTheme(currentTheme);
                
                themeButtons.forEach(btn => {
                    btn.addEventListener('click', () => {
                        themeButtons.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.applyTheme(btn.dataset.theme);
                        localStorage.setItem('selectedTheme', btn.dataset.theme);
                    });
                });
            }

            applyTheme(theme) {
                document.body.className = '';
                if (theme !== 'default') {
                    document.body.classList.add(`${theme}-theme`);
                }
            }

            initializeProSystem() {
                this.updateProUI();
                
                document.getElementById('upgradeBtn').addEventListener('click', () => {
                    this.showUpgradeModal();
                });

                const saveBtn = document.getElementById('saveBtn');
                if (saveBtn) {
                    saveBtn.addEventListener('click', () => {
                        const dreamText = document.getElementById('dreamInput').value;
                        const interpretationElement = document.getElementById('interpretation');
                        const interpretation = interpretationElement ? interpretationElement.textContent : ''; // ‡πÉ‡∏ä‡πâ textContent ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
                        
                        if (dreamText && interpretation) {
                            this.saveDreamHistory(dreamText, interpretation);
                            alert('üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!');
                        }
                    });
                }

                this.initializeThemes();
                this.displayDreamHistory();
            }

            showUpgradeModal() {
                const key = prompt('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà Pro Key ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:\n\nPro Key ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:\n- DREAM_PRO_2024\n- PREMIUM_DREAM_KEY\n- PRO_INTERPRETER_VIP');
                
                if (key) {
                    if (this.activatePro(key)) {
                        alert('üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏õ‡πá‡∏ô Pro ‡πÅ‡∏•‡πâ‡∏ß');
                    } else {
                        alert('‚ùå Pro Key ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                    }
                }
            }
        }

        const proManager = new ProManager();
        
        // Gemini API Key (‡∏Ñ‡∏ß‡∏£‡∏ñ‡∏π‡∏Å‡∏ã‡πà‡∏≠‡∏ô‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå .env ‡∏à‡∏£‡∏¥‡∏á‡πÜ)
        const GEMINI_API_KEY = 'AIzaSyBI_E4OLbOIWw5B9tRnF6lJKy3yutN-r-8'; 
        const GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite:generateContent';
        
        const dreamExamples = [
            '‡∏ù‡∏±‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏á‡∏π‡πÉ‡∏´‡∏ç‡πà‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÄ‡∏•‡∏∑‡πâ‡∏≠‡∏¢‡∏°‡∏≤‡∏´‡∏≤‡∏â‡∏±‡∏ô', '‡∏ù‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏ö‡∏¥‡∏ô‡πÑ‡∏õ‡πÉ‡∏ô‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤‡∏™‡∏µ‡∏ü‡πâ‡∏≤', 
            '‡∏ù‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏´‡∏ß‡∏¢‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ó‡∏µ‡πà‡∏´‡∏ô‡∏∂‡πà‡∏á', '‡∏ù‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏ï‡∏Å‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô', 
            '‡∏ù‡∏±‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏û‡∏£‡∏∞‡∏™‡∏µ‡∏ó‡∏≠‡∏á‡∏™‡πà‡∏≠‡∏á‡πÅ‡∏™‡∏á', '‡∏ù‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏£‡∏∑‡∏≠‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡πâ‡∏≤‡∏°‡∏ó‡∏∞‡πÄ‡∏•', 
            '‡∏ù‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡πÑ‡∏•‡πà‡∏Å‡∏±‡∏î', '‡∏ù‡∏±‡∏ô‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏ö‡πâ‡∏≤‡∏ô'
        ];
        
        // =================================================================
        // START: PERFORMANCE ENHANCEMENT FUNCTIONS
        // =================================================================

        function createVisualEffects() {
            const starsContainer = document.getElementById('stars');
            const particlesContainer = document.getElementById('particles');
            const elementsContainer = document.getElementById('floatingElements');
            
            const isMobile = window.innerWidth <= 480;
            const isTablet = window.innerWidth <= 768 && window.innerWidth > 480;
            
            // 1. Stars (Reduced Count for Performance)
            const numStars = isMobile ? 30 : (isTablet ? 70 : 100);
            for (let i = 0; i < numStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.width = `${Math.random() * 2 + 1}px`;
                star.style.height = star.style.width;
                star.style.animationDelay = `${Math.random() * 2}s`;
                starsContainer.appendChild(star);
            }

            // 2. Shooting Stars (Only on Desktop/Tablet)
            function createShootingStar() {
                if (isMobile) return;
                
                const shootingStar = document.createElement('div');
                shootingStar.className = 'shooting-star';
                shootingStar.style.left = `${Math.random() * 50 + '%'} `;
                shootingStar.style.top = `${Math.random() * 50 + '%'} `;
                shootingStar.style.animationDelay = `${Math.random() * 2}s`;
                starsContainer.appendChild(shootingStar);
                
                setTimeout(() => {
                    if (shootingStar.parentNode) {
                        shootingStar.parentNode.removeChild(shootingStar);
                    }
                }, 3000);
            }

            // 3. Constellations (Reduced Count/Complexity)
            function createConstellation() {
                const constellation = document.createElement('div');
                constellation.className = 'constellation';
                constellation.style.left = `${Math.random() * 80 + 10}%`;
                constellation.style.top = `${Math.random() * 80 + 10}%`;
                constellation.style.animationDelay = `${Math.random() * 4}s`;
                
                const constellationStarsCount = isMobile ? 3 : 5;
                
                for (let i = 0; i < constellationStarsCount; i++) {
                    const constellationStar = document.createElement('div');
                    constellationStar.style.position = 'absolute';
                    constellationStar.style.width = '2px';
                    constellationStar.style.height = '2px';
                    constellationStar.style.background = '#e1bee7';
                    constellationStar.style.borderRadius = '50%';
                    constellationStar.style.left = `${i * (15 / (isMobile ? 1.5 : 1))}px`;
                    constellationStar.style.top = `${Math.sin(i) * (isMobile ? 5 : 10)}px`;
                    constellation.appendChild(constellationStar);
                }
                starsContainer.appendChild(constellation);
            }
            
            // Start recurring effects
            const shootingStarInterval = isMobile ? 99999 : (isTablet ? 15000 : 7000);
            setInterval(createShootingStar, shootingStarInterval);

            const numConstellations = isMobile ? 1 : (isTablet ? 2 : 3);
            for (let i = 0; i < numConstellations; i++) {
                setTimeout(() => createConstellation(), i * 3000);
            }
            
            // 4. Floating Elements & Particles
            initializeFloatingElements();
        }

        // END: PERFORMANCE ENHANCEMENT FUNCTIONS
        // =================================================================

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        async function callGeminiAPI(dreamText) {
            const prompt = `‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÇ‡∏´‡∏£‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÑ‡∏ó‡∏¢ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏ô‡∏µ‡πâ: "${dreamText}"

            ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏≠‡∏ö‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö JSON ‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:
            {
              "interpretation": "‡∏Ñ‡∏≥‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (2-3 ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ)",
              "subconscious": "‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏à‡∏¥‡∏ï‡πÉ‡∏ï‡πâ‡∏™‡∏≥‡∏ô‡∏∂‡∏Å (2-3 ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ)", 
              "luckScore": ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ 1-10,
              "luckyNumbers": [‡πÄ‡∏•‡∏Ç2‡∏´‡∏•‡∏±‡∏Å, ‡πÄ‡∏•‡∏Ç2‡∏´‡∏•‡∏±‡∏Å, ‡πÄ‡∏•‡∏Ç3‡∏´‡∏•‡∏±‡∏Å]
            }

            ‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏ä‡∏Ñ:
            - ‡∏ù‡∏±‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏á‡∏π, ‡∏û‡∏£‡∏∞, ‡∏ó‡∏≠‡∏á, ‡πÄ‡∏á‡∏¥‡∏ô, ‡∏ä‡πâ‡∏≤‡∏á = ‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ‡∏™‡∏π‡∏á (8-10)
            - ‡∏ù‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏ö‡∏¥‡∏ô, ‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏£‡∏∑‡∏≠, ‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ = ‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (6-8)
            - ‡∏ù‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏ï‡∏Å, ‡∏´‡∏ô‡∏µ, ‡∏ñ‡∏π‡∏Å‡πÑ‡∏•‡πà = ‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ‡∏ï‡πà‡∏≥ (3-5)

            ‡∏ï‡∏≠‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏Ç‡∏´‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô`;

            try {
                const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: prompt
                            }]
                        }]
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                const text = data.candidates[0].content.parts[0].text;
                
                try {
                    const jsonMatch = text.match(/\{[\s\S]*\}/);
                    if (jsonMatch) {
                        return JSON.parse(jsonMatch[0]);
                    }
                } catch (e) {
                    console.error('Error parsing JSON from Gemini:', e);
                }
                
                return simulateLocalDecode(dreamText);
                
            } catch (error) {
                console.error('Error calling Gemini API:', error);
                return simulateLocalDecode(dreamText);
            }
        }
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô fallback ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ API ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°)
        function simulateLocalDecode(dreamText) {
            const text = dreamText.toLowerCase();
            let interpretation, subconscious, luckScore, luckyNumbers;
            
            if (text.includes('‡∏á‡∏π')) {
                interpretation = '‡∏Å‡∏≤‡∏£‡∏ù‡∏±‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏á‡∏π‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÅ‡∏•‡∏∞‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï ‡∏≠‡∏≤‡∏à‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÉ‡∏´‡∏°‡πà‡πÜ ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡∏°‡∏≤‡∏ñ‡∏∂‡∏á';
                subconscious = '‡∏à‡∏¥‡∏ï‡πÉ‡∏ï‡πâ‡∏™‡∏≥‡∏ô‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡∏±‡∏ß‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï';
                luckScore = 9;
                luckyNumbers = [16, 69, 169];
            } else if (text.includes('‡∏ö‡∏¥‡∏ô') || text.includes('‡∏ü‡πâ‡∏≤')) {
                interpretation = '‡∏Å‡∏≤‡∏£‡∏ù‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏ö‡∏¥‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏£‡∏≤‡∏£‡∏ñ‡∏ô‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏¥‡∏™‡∏£‡∏∞‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏≠‡∏≥‡∏ô‡∏≤‡∏à‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ç‡∏≠‡∏á‡∏ï‡∏ô‡πÄ‡∏≠‡∏á';
                subconscious = '‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏∏‡πà‡∏á‡∏°‡∏±‡πà‡∏ô‡∏™‡∏π‡∏á‡πÅ‡∏•‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡πâ‡∏≤‡∏ß‡∏Ç‡πâ‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï';
                luckScore = 7;
                luckyNumbers = [27, 72, 272];
            } else if (text.includes('‡πÄ‡∏á‡∏¥‡∏ô') || text.includes('‡∏ó‡∏≠‡∏á') || text.includes('‡∏´‡∏ß‡∏¢')) {
                interpretation = '‡∏Å‡∏≤‡∏£‡∏ù‡∏±‡∏ô‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏≤‡∏á‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏ö‡πà‡∏á‡∏ö‡∏≠‡∏Å‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏á‡∏Ñ‡∏±‡πà‡∏á‡πÅ‡∏•‡∏∞‡πÇ‡∏ä‡∏Ñ‡∏•‡∏≤‡∏†‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏°‡∏≤‡∏ñ‡∏∂‡∏á';
                subconscious = '‡∏à‡∏¥‡∏ï‡πÉ‡∏ï‡πâ‡∏™‡∏≥‡∏ô‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô';
                luckScore = 10;
                luckyNumbers = [88, 99, 889];
            } else if (text.includes('‡∏û‡∏£‡∏∞') || text.includes('‡∏ß‡∏±‡∏î')) {
                interpretation = '‡∏Å‡∏≤‡∏£‡∏ù‡∏±‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏û‡∏£‡∏∞‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏¥‡πà‡∏á‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏™‡∏î‡∏á‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏û‡∏£‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡∏£‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏¥‡πà‡∏á‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå';
                subconscious = '‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏à‡∏¥‡∏ï‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏ö‡∏£‡∏¥‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏•‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏á‡∏ö‡∏™‡∏∏‡∏Ç‡∏ó‡∏≤‡∏á‡∏à‡∏¥‡∏ï‡∏ß‡∏¥‡∏ç‡∏ç‡∏≤‡∏ì';
                luckScore = 9;
                luckyNumbers = [18, 81, 181];
            } else if (text.includes('‡∏ï‡∏Å') || text.includes('‡∏´‡∏ô‡∏µ') || text.includes('‡πÑ‡∏•‡πà')) {
                interpretation = '‡∏Å‡∏≤‡∏£‡∏ù‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏ï‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡∏π‡∏Å‡πÑ‡∏•‡πà‡∏≠‡∏≤‡∏à‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏±‡∏á‡∏ß‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏à‡∏£‡∏¥‡∏á';
                subconscious = '‡∏à‡∏¥‡∏ï‡πÉ‡∏ï‡πâ‡∏™‡∏≥‡∏ô‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏î‡∏î‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï';
                luckScore = 4;
                luckyNumbers = [13, 31, 131];
            } else if (text.includes('‡∏ô‡πâ‡∏≥') || text.includes('‡∏ó‡∏∞‡πÄ‡∏•') || text.includes('‡πÄ‡∏£‡∏∑‡∏≠')) {
                interpretation = '‡∏ô‡πâ‡∏≥‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÑ‡∏´‡∏•‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡∏Ç‡∏≠‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï ‡∏Å‡∏≤‡∏£‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏£‡∏∑‡∏≠‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏π‡πà‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà';
                subconscious = '‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ú‡∏ä‡∏¥‡∏ç‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ó‡∏≤‡∏á‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡πÅ‡∏•‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏î‡∏∏‡∏•‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï';
                luckScore = 6;
                luckyNumbers = [24, 42, 242];
            } else {
                interpretation = '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏£‡∏≤‡∏£‡∏ñ‡∏ô‡∏≤‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏±‡∏á‡∏ß‡∏•‡πÉ‡∏ô‡∏à‡∏¥‡∏ï‡πÉ‡∏ï‡πâ‡∏™‡∏≥‡∏ô‡∏∂‡∏Å ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô';
                subconscious = '‡∏à‡∏¥‡∏ï‡πÉ‡∏ï‡πâ‡∏™‡∏≥‡∏ô‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà';
                luckScore = Math.floor(Math.random() * 4) + 5;
                luckyNumbers = [
                    Math.floor(Math.random() * 90) + 10,
                    Math.floor(Math.random() * 90) + 10,
                    Math.floor(Math.random() * 900) + 100
                ];
            }
            
            return {
                interpretation,
                subconscious,
                luckScore,
                luckyNumbers
            };
        }

        function displayResult(result, dreamText = '') {
            document.getElementById('interpretation').innerHTML = result.interpretation;
            document.getElementById('subconscious').innerHTML = result.subconscious;
            document.getElementById('luckScore').innerHTML = `‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ <span class="luck-score-number counter" data-target="${result.luckScore}">0</span>/10`;
            
            const luckyNumbersHtml = result.luckyNumbers.map(num => 
                `<span class="number-badge">${num}</span>`
            ).join('');
            document.getElementById('luckyNumbers').innerHTML = luckyNumbersHtml;
            
            // Pro Feature Update
            if (proManager.isPro) {
                const deepAnalysis = proManager.generateDeepAnalysis(dreamText, result.interpretation);
                document.getElementById('deepAnalysis').innerHTML = deepAnalysis;
            }
            
            // Update Progress Bar & Time
            document.getElementById('progressFill').style.width = `${result.luckScore * 10}%`;
            const now = new Date();
            document.getElementById('updateTime').textContent = 
                `‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: ${now.toLocaleDateString('th-TH')} ${now.toLocaleTimeString('th-TH')}`;
            
            // Show Section and Scroll
            document.getElementById('resultSection').style.display = 'block';
            document.getElementById('copyBtn').style.display = 'inline-block';
            
            document.getElementById('resultSection').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
            
            animateCounter();
        }

        // Counter Animation Function (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°)
        function animateCounter() {
            const counters = document.querySelectorAll('.counter');
            counters.forEach(counter => {
                const target = parseInt(counter.getAttribute('data-target'));
                const increment = target / 50;
                let current = 0;
                
                const updateCounter = () => {
                    if (current < target) {
                        current += increment;
                        counter.textContent = Math.ceil(current);
                        setTimeout(updateCounter, 30);
                    } else {
                        counter.textContent = target;
                    }
                };
                
                updateCounter();
            });
        }
        
        function copyResult() {
            const interpretation = document.getElementById('interpretation').textContent;
            const subconscious = document.getElementById('subconscious').textContent;
            const luckScore = document.getElementById('luckScore').textContent;
            const luckyNumbers = Array.from(document.querySelectorAll('.number-badge'))
                .map(badge => badge.textContent).join(', ');
            
            const resultText = `ü™Ñ AI Dream Interpreter - ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô\n\n‚ú® ‡∏Ñ‡∏≥‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô:\n${interpretation}\n\nüß† ‡πÅ‡∏õ‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏¥‡∏ï‡πÉ‡∏ï‡πâ‡∏™‡∏≥‡∏ô‡∏∂‡∏Å:\n${subconscious}\n\nüçÄ ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ: ${luckScore}\n\nüéØ ‡πÉ‡∏ö‡πâ‡∏´‡∏ß‡∏¢‡πÑ‡∏ó‡∏¢: ${luckyNumbers}\n\n${document.getElementById('updateTime').textContent}`;
            
            navigator.clipboard.writeText(resultText).then(() => {
                const btn = document.getElementById('copyBtn');
                const originalText = btn.textContent;
                btn.textContent = '‚úÖ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            }).catch(() => {
                alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
            });
        }
        
        function randomDream() {
            const randomIndex = Math.floor(Math.random() * dreamExamples.length);
            document.getElementById('dreamInput').value = dreamExamples[randomIndex];
        }
        
        async function interpretDream() {
            const dreamText = document.getElementById('dreamInput').value.trim();
            
            if (!dreamText) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Å‡πà‡∏≠‡∏ô');
                return;
            }

            if (!proManager.canUseService()) {
                alert(`‚ùå ‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏ö ${proManager.maxFreeUsage} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏•‡πâ‡∏ß\n\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏õ‡πá‡∏ô Pro ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î`);
                return;
            }
            
            document.getElementById('loading').style.display = 'block';
            document.getElementById('resultSection').style.display = 'none';
            document.getElementById('interpretBtn').disabled = true;
            
            try {
                const result = await callGeminiAPI(escapeHtml(dreamText));
                
                proManager.incrementUsage();
                
                document.getElementById('loading').style.display = 'none';
                document.getElementById('interpretBtn').disabled = false;
                
                displayResult(result, dreamText);
                
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('loading').style.display = 'none';
                document.getElementById('interpretBtn').disabled = false;
                alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
            }
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            proManager.initializeProSystem();
            createVisualEffects(); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå
            initializeFloatingElements(); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏ô‡∏∏‡∏†‡∏≤‡∏Ñ
            
            document.getElementById('interpretBtn').addEventListener('click', interpretDream);
            document.getElementById('randomBtn').addEventListener('click', randomDream);
            document.getElementById('copyBtn').addEventListener('click', copyResult);
            
            // Tab switching
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-tab');
                    
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    document.getElementById(targetTab + 'Tab').classList.add('active');
                    
                    // ‡∏´‡∏≤‡∏Å‡∏™‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏µ‡πà History ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ (Pro Feature)
                    if (targetTab === 'history' && proManager.isPro) {
                        proManager.displayDreamHistory();
                    }
                });
            });
            
            // Enter ‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
            document.getElementById('dreamInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    interpretDream();
                }
            });
            
            // ‡∏ã‡πà‡∏≠‡∏ô Loading Screen ‡πÄ‡∏°‡∏∑‡πà‡∏≠ DOM ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå (‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 4 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏ï‡∏≤‡∏° CSS)
            setTimeout(() => {
                const loadingScreen = document.getElementById('loadingScreen');
                if (loadingScreen) {
                    loadingScreen.classList.add('hidden');
                }
            }, 4000);
        });
    </script>
</body>
</html>